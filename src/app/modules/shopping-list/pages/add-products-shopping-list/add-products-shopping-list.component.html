<app-page>
  <ng-container navbar>
    <app-add-products-navbar-shopping-list/>
  </ng-container>
  <ng-container header>
    <app-add-product-header-shopping-list [idShoppingList]="idShoppingList"/>
  </ng-container>
  <ng-container content>
    <p-iconField iconPosition="left">
      <p-inputIcon styleClass="fas fa-search"/>
      <input type="text"
             [formControl]="nameProductFormControl"
             pInputText
             class="w-100 d-block mb-3"
             placeholder="Nombre del producto"/>
    </p-iconField>
    <div class="mb-3">
      <p-checkbox styleClass="mr-2"
                  [binary]="true"
                  checkboxIcon="fas fa-check"
                  (onChange)="onToggleProductsViewChange()"/>
      <label class="m-0">Con imágen</label>
    </div>
    @if (toggleProductsView()) {
      <app-product-image-list [products]="products()"
                              (showDialogSelectProduct)="showDialogSelectProductEvent($event)"
                              (addProduct)="addProductEvent($event)"/>
    } @else {
      <app-product-group-list [products]="products()"
                              (showDialogSelectProduct)="showDialogSelectProductEvent($event)"
                              (addProduct)="addProductEvent($event)"/>
    }
    @if (showMoreButton.render()) {
      <p-button icon="fas fa-spinner"
                [disabled]="showMoreButton.disabled()"
                styleClass="btn btn-default btn-block"
                label="Cargar más"
                (click)="showMoreButton.click()"/>
    }

    <app-product-modal-add-products [selectedProduct]="selectedProduct()"
                                    (addProductsEvent)="addProductsSubmit($event)"
                                    (autoCompleteUnitTypeEvent)="autoCompleteUnitTypeEvent($event)"
                                    [findAllUnityTypesRes]="findAllUnityTypesRes()"
                                    [idShoppingList]="idShoppingList"/>
  </ng-container>
</app-page>
